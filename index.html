<script>
// CONFIGURAÇÃO DE PASSEIOS
let vagasDisponiveis = {
    1: 30, // Cânion das Índias
    2: 30  // Boia Cross
};

let precos = {
    1: { PIX: 315, Credito: 329 },
    2: { PIX: 425, Credito: 439 }
};

let links = {
    1: {
        PIX:'trilheiros.roomt@gmail.com',
        Credito:'https://mpago.li/1a6km3S'
    },
    2: {
        PIX:'trilheiros.roomt@gmail.com',
        Credito:'https://mpago.li/1bGTJ9b'
    }
};

let quantidade = {1:1, 2:1};

function atualizar(id) {
    const tipo = document.getElementById("pag"+id).value;
    const disponivel = vagasDisponiveis[id];

    if (quantidade[id] > disponivel) {
        document.getElementById("mensagem"+id).innerText =
            "Vagas preenchidas, para mais informações falar com Jonatas";
        document.getElementById("total"+id).innerText = "Total indisponível";
        document.getElementById("pagamentoBtn"+id).style.display = "none";
        return;
    } else {
        document.getElementById("mensagem"+id).innerText = "";
    }

    const total = precos[id][tipo] * quantidade[id];
    document.getElementById("total"+id).innerText = "Total R$ " + total;
    document.getElementById("qtd"+id).innerText = quantidade[id];

    const btn = document.getElementById("pagamentoBtn"+id);
    btn.style.display = "block";

    if(tipo === "PIX"){
        btn.innerText = "Copiar chave PIX";
        btn.className = "btn pixbtn";
        btn.href = "javascript:copiarPix('" + links[id][tipo] + "')";
    } else {
        btn.innerText = "Pagar no cartão";
        btn.className = "btn creditobtn";
        btn.href = links[id][tipo];
        btn.target = "_blank";
    }
}

function aumentar(id){
    quantidade[id]++;
    atualizar(id);
}

function diminuir(id){
    if(quantidade[id] > 1){
        quantidade[id]--;
        atualizar(id);
    }
}

function copiarPix(chave){
    navigator.clipboard.writeText(chave);
    alert("Chave PIX copiada: " + chave);
}

function enviarWhatsApp(id, nomePasseio){
    const nome = document.getElementById("nome"+id).value;

    if(!nome){
        alert("Por favor, digite seu nome antes de enviar a confirmação.");
        return;
    }

    let msg =
        "Olá, meu nome é " + nome +
        ". Reservei " + quantidade[id] +
        " vaga(s) para o passeio " + nomePasseio +
        ". Segue o comprovante.";

    window.open("https://wa.me/5566996926174?text="+encodeURIComponent(msg), "_blank");
}
</script>


